@model SalesAndInventory.ViewModels.PurchaseListViewModel

@{
    ViewBag.Title = "Index";
    int listCounter = 0;
}

<h2>
    Purchase
    <span class="pull-right"><a href="/Purchase/Create" class="btn btn-blue btn-outline" type="button"><i class="icon-plus"></i> New Purchase</a></span>
</h2>

<div class="row">
    <div class="col-lg-12 animatedParent animateOnce z-index-50">
        <div class="panel panel-default animated fadeInUp">
            <div class="panel-heading clearfix">
                <h3 class="panel-title"><i class="icon-list"></i> List</h3>
                <ul class="panel-tool-options">
                    <li><a data-rel="collapse" href="#"><i class="icon-down-open"></i></a></li>
                    <li><a data-rel="reload" href="#"><i class="icon-arrows-ccw"></i></a></li>
                </ul>
            </div>
            <div class="panel-body">
                <div class="table-responsive" style="overflow-x: hidden">
                    <table class="table table-striped table-bordered table-hover dt">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Purchase No.</th>
                                <th>Ref No.</th>
                                <th>Received By</th>
                                <th>Expenses</th>
                                <th>Amount</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            @foreach (var purchase in Model.PurchaseList)
                            {
                                listCounter++; ViewBag.Counter = listCounter;
                                <tr id="tr-purchase">
                                    <td>@ViewBag.Counter</td>
                                    <td>@purchase.PurchaseNumber</td>
                                    <td>@purchase.ReferenceNumber</td>
                                    <td><h4 class="margin-t-0 margin-b-0">@purchase.ReceivedBy</h4> <i>on <small class="strong-7">@purchase.DateAndTime.ToString("dd-MMM, yyyy hh:mm tt")</small> from <small class="strong-7">@purchase.SupplierName</small></i></td>
                                    <td>@purchase.Expenses</td>
                                    <td>@purchase.PurchaseAmount</td>
                                    <td>@purchase.TotalAmount</td>
                                    <td><a class="btn btn-success btn-xs" href="/Purchase/Details?id=@purchase.PurchaseId">View</a></td>
                                </tr>
                            }

                        </tbody>
                        <tfoot>
                            <tr>
                                <th></th>
                                <th>Purchase No.</th>
                                <th>Ref No.</th>
                                <th>Received By</th>
                                <th>Expenses</th>
                                <th>Amount</th>
                                <th>Total</th>
                                <th></th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {

    <link href="/Content/css/plugins/datatables/jquery.dataTables.css" rel="stylesheet">
    <link href="/Scripts/js/plugins/datatables/extensions/Buttons/css/buttons.dataTables.css" rel="stylesheet">
    @Scripts.Render("~/bundles/dataTables")

    <script>
        $(document).ready(function () {
            $('.dt').DataTable();
        });
    </script>
}